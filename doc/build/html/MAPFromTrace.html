<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>butools.fitting.MAPFromTrace &mdash; butools v2.0 Manual</title>
    
    <link rel="stylesheet" type="text/css" href="_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="_static/css/spc-extend.css">
    <link rel="stylesheet" href="_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/copybutton.js"></script>
    <link rel="top" title="butools v2.0 Manual" href="index.html" >
    <link rel="up" title="Tools for fitting measurement traces (butools.fitting)" href="fitting.html" >
    <link rel="next" title="butools.fitting.SquaredDifference" href="SquaredDifference.html" >
    <link rel="prev" title="butools.fitting.PHFromTrace" href="PHFromTrace.html" > 
  </head>
  <body>

  <div class="container">
    <div class="header">
    </div>
  </div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
        <li class="active"><a href="["></a></li>
        <li class="active"><a href="]"></a></li>
	
        <li class="active"><a href="index.html">butools v2.0 Manual</a></li>
	
          <li class="active"><a href="fitting.html" accesskey="U">Tools for fitting measurement traces (<tt class="docutils literal"><span class="pre">butools.fitting</span></tt>)</a></li> 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
      <li class="active">
        <a href="SquaredDifference.html" title="butools.fitting.SquaredDifference"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="PHFromTrace.html" title="butools.fitting.PHFromTrace"
           accesskey="P">previous</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="PHFromTrace.html"
                        title="previous chapter">butools.fitting.PHFromTrace</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="SquaredDifference.html"
                        title="next chapter">butools.fitting.SquaredDifference</a></p>

        </div>
      </div>
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="butools-fitting-mapfromtrace">
<h1>butools.fitting.MAPFromTrace<a class="headerlink" href="#butools-fitting-mapfromtrace" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="butools.fitting.MAPFromTrace">
<tt class="descclassname">butools.fitting.</tt><tt class="descname">MAPFromTrace</tt><big>(</big><big>)</big><a class="headerlink" href="#butools.fitting.MAPFromTrace" title="Permalink to this definition">¶</a></dt>
<dd><table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Matlab:</td>
<td><tt class="code docutils literal"><span class="pre">[D0,</span> <span class="pre">D1,</span> <span class="pre">logli]</span> <span class="pre">=</span> <span class="pre">MAPFromTrace(trace,</span> <span class="pre">orders,</span> <span class="pre">maxIter,</span> <span class="pre">stopCond,</span> <span class="pre">initial,</span> <span class="pre">result)</span></tt></td>
</tr>
<tr class="row-even"><td>Mathematica:</td>
<td><tt class="code docutils literal"><span class="pre">{D0,</span> <span class="pre">D1,</span> <span class="pre">logli}</span> <span class="pre">=</span> <span class="pre">MAPFromTrace[trace,</span> <span class="pre">orders,</span> <span class="pre">maxIter,</span> <span class="pre">stopCond,</span> <span class="pre">initial,</span> <span class="pre">result]</span></tt></td>
</tr>
<tr class="row-odd"><td>Python/Numpy:</td>
<td><tt class="code docutils literal"><span class="pre">D0,</span> <span class="pre">D1,</span> <span class="pre">logli</span> <span class="pre">=</span> <span class="pre">MAPFromTrace(trace,</span> <span class="pre">orders,</span> <span class="pre">maxIter,</span> <span class="pre">stopCond,</span> <span class="pre">initial,</span> <span class="pre">result)</span></tt></td>
</tr>
</tbody>
</table>
<p>Performs MAP fitting using the EM algorithm (ErCHMM,
<a class="reference internal" href="#r20" id="id1">[R20]</a>, <a class="reference internal" href="#r21" id="id2">[R21]</a>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>trace</strong> : column vector, length K</p>
<blockquote>
<div><p>The samples of the trace</p>
</div></blockquote>
<p><strong>orders</strong> : list of int, length(N), or int</p>
<blockquote>
<div><p>The length of the list determines the number of
Erlang branches to use in the fitting method.
The entries of the list are the orders of the
Erlang distributions. If this parameter is a
single integer, all possible branch number - order
combinations are tested where the total number of
states is &#8220;orders&#8221;.</p>
</div></blockquote>
<p><strong>maxIter</strong> : int, optional</p>
<blockquote>
<div><p>Maximum number of iterations. The default value is
200</p>
</div></blockquote>
<p><strong>stopCond</strong> : double, optional</p>
<blockquote>
<div><p>The algorithm stops if the relative improvement of
the log likelihood falls below stopCond. The
default value is 1e-7</p>
</div></blockquote>
<p><strong>initial</strong> : tuple of a vector and a matrix, shape(N,N), optional</p>
<blockquote>
<div><p>The rate parameters of the Erlang distributions
and the branch transition probability matrix to be
used initially. If not given, a default initial
guess is determined and the algorithm starts from
there.</p>
</div></blockquote>
<p><strong>result</strong> : {&#8220;vecmat&#8221;, &#8220;matmat&#8221;}, optional</p>
<blockquote>
<div><p>The result can be returned two ways. If &#8220;matmat&#8221; is
selected, the result is returned in the classical
representation of MAPs, thus the D0 and D1 matrices.
If &#8220;vecmat&#8221; is selected, the rate parameters of the
Erlang branches and the branch transition probability
matrix are returned. The default value is &#8220;matmat&#8221;</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>(D0, D1)</strong> : tuple of matrix, shape (M,M) and matrix, shape (M,M)</p>
<blockquote>
<div><p>If the &#8220;matmat&#8221; result format is chosen, the function
returns the D0 and D1 matrices of the MAP</p>
</div></blockquote>
<p><strong>(lambda, P)</strong> : tuple of vector, length N and matrix, shape (M,M)</p>
<blockquote>
<div><p>If the &#8220;vecmat&#8221; result format is chosen, the function
returns the vector of the Erlang rate parameters of
the branches and the branch transition probability
matrix</p>
</div></blockquote>
<p><strong>logli</strong> : double</p>
<blockquote class="last">
<div><p>The log-likelihood divided by the trace length</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This procedure is quite slow in the supported
mathematical frameworks. If the maximum speed is
needed, please use the multi-core optimized c++
implementation called <a class="reference external" href="https://bitbucket.org/ghorvath78/spemfit">SPEM-FIT</a>.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r20" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R20]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id3">2</a>)</em> Okamura, Hiroyuki, and Tadashi Dohi. Faster
maximum likelihood estimation algorithms for
Markovian arrival processes. Quantitative
Evaluation of Systems, 2009. QEST&#8216;09. Sixth
International Conference on the. IEEE, 2009.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r21" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R21]</td><td><em>(<a class="fn-backref" href="#id2">1</a>, <a class="fn-backref" href="#id4">2</a>)</em> Horváth, Gábor, and Hiroyuki Okamura. A Fast EM
Algorithm for Fitting Marked Markovian Arrival
Processes with a New Special Structure. Computer
Performance Engineering. Springer Berlin
Heidelberg, 2013. 119-133.</td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>For Matlab:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tr</span> <span class="o">=</span> <span class="n">dlmread</span><span class="p">(</span><span class="s">&#39;trace.txt&#39;</span><span class="p">);</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">D0</span><span class="p">,</span><span class="n">D1</span><span class="p">]</span> <span class="o">=</span> <span class="n">MAPFromTrace</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">10000</span><span class="p">),</span><span class="mi">5</span><span class="p">);</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D0</span>
<span class="go">      -83.429            0            0            0            0</span>
<span class="go">            0      -718.68            0            0            0</span>
<span class="go">            0            0      -1026.2       1026.2            0</span>
<span class="go">            0            0            0      -1026.2       1026.2</span>
<span class="go">            0            0            0            0      -1026.2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D1</span>
<span class="go">       54.149       4.9019       24.379            0            0</span>
<span class="go">       3.3915       665.85       49.439            0            0</span>
<span class="go">            0            0            0            0            0</span>
<span class="go">            0            0            0            0            0</span>
<span class="go">       42.647       96.944       886.57            0            0</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2013-2014, The BuTools Team.
      </li>
      <li>
      Last updated on Jul 25, 2014.
      </li>
      <li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>